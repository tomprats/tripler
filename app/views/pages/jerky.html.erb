<div id="products">
  <div id="mainpage">
    <h1>Shop</h1>
    <div class="row">
      <p class="text-center">
        Our jerky costs $<%= number_with_precision(@products.first.price / 100.0, precision: 2) %> per pack, and are shipped in packs of 8.
        <br>For bulk orders call 717-542-4022 or fill out our <%= link_to "contact form", contact_path %> and we'll get back to you soon.
      </p>
    </div>
    <div class="row">
      <div class="col-md-12">
        <h4 class="text-center">
          <span class="padding-right-40">Packs: <span class="packs"><%= @packs %></span></span>
          <span>Quantity to complete a pack: <span class="packless"><%= @packless.zero? ? 0 : 8 - @packless  %></span></span>
        </h4>
      </div>
    </div>
    <div class="row">
      <% normal = @products.select { |product| !product.name.downcase.include?("coffee") } %>
      <% coffee = @products.select { |product| product.name.downcase.include?("coffee") } %>
      <div class="col-md-6">
        <h2 class="text-center">Classic Jerky</h2>
        <% normal.each do |product| %>
          <div class="row product-box" data-id="<%= product.id %>">
            <h3 class="product-name"><%= product.name %></h3>
            <div class="col-md-6">
              <%= image_tag product.image.url, class: "product-image" %>
            </div>
            <div class="col-md-6">
              <div class="product-quantity">Quantity: <%= select_tag(:quantity, options_for_select(0..50, @cart[product.id.to_s])) %></div>
              <div class="product-description"><%= product.description %></div>
              <div class="hide product-price">Price: $<span class="price"><%= number_with_precision(product.price/100.0, precision: 2) %></span></div>
            </div>
          </div>
        <% end %>
      </div>
      <div class="col-md-6">
        <h2 class="text-center">Coffee Jerky</h2>
        <% coffee.each do |product| %>
          <div class="row product-box" data-id="<%= product.id %>">
            <h3 class="product-name"><%= product.name %></h3>
            <div class="col-md-6">
              <%= image_tag product.image.url, class: "product-image" %>
            </div>
            <div class="col-md-6">
              <div class="product-quantity">Quantity: <%= select_tag(:quantity, options_for_select(0..50, @cart[product.id.to_s])) %></div>
              <div class="product-description"><%= product.description %></div>
              <div class="hide product-price">Price: $<span class="price"><%= number_with_precision(product.price/100.0, precision: 2) %></span></div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
    <div class="row margin-top-20">
      <div class="col-md-6 text-center">
        <%= link_to "Empty Cart", empty_cart_path, method: :delete, class: "btn btn-green" %>
        <%= link_to "Checkout", "#", class: "btn btn-green checkout" %>
      </div>
      <div class="col-md-6">
        <h3 class="margin-0">Total: $<span class="total"><%= number_with_precision(@total/100.0, precision: 2) %></span></h3>
      </div>
    </div>
    <% unless @coming_soon.empty? %>
      <h1>Coming Soon</h1>
      <div class="row">
        <% @coming_soon.each do |product| %>
          <div class="col-md-6 product-box">
            <div class="row">
              <h3 class="product-name"><%= product.name %></h3>
              <div class="col-md-6">
                <%= image_tag product.image.url, class: "product-image" %>
              </div>
              <div class="col-md-6">
                <div class="product-description"><%= product.description %></div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
